---
title: 'Correlation Significance Test'
Section: 'Correlation'
Author: "Adam Dede"
Course: "Data to Decisions: Master Statistics with R and tidyverse"
Course_URL: "..." 
html_document:
    toc: yes
    toc_float: yes
editor_options:
  chunk_output_type: console
---


## set environment

```{r message = FALSE, warning = FALSE}

# Set rendering parameters
knitr::opts_chunk$set(message = FALSE, warning = FALSE)

gitHubPath <- file.path(path.expand("~"), "GitHub", 
                        "MasterStatsUsingR")

library(tidyverse) # data manipulation and visualization
source(file.path(gitHubPath, 'courseTheme.R'))
library(pracma)

```

## load data from last time 

```{r}

allMurders = read.csv(file.path(gitHubPath, 'data',
                    'murderDatCombined_iceCream.csv'))



```

## doing a null hypothesis test: 

```{r pearson}
#Step 1 Question: 
#Are ice cream sales related to murder rate? 

#Step 2 null v. alternative: 
#null: rho = 0
#alternative: rho != 0

#Step 3 Decision rule: 
alpha = 
df = 
critT = 

#step 4 calculate r stat and convert to t: 
#this time let's use the builtin function for correlation
r = 
  #t = r*sqrt(n-2) / sqrt(1-r^2)
t = 

#step 5 compare to decision rule: 
sig = 

#step 6 answer the question: 
if(sig){
  print(paste('There is a significant relationship between',
              'ice cream sales and murder rate. t =',
              round(abs(t),2), '; p =', round(1-pt(abs(t),df),3)))
} else {
  print(paste('There is no evidence for a relationship between',
              'ice cream sales and murder rate. t =',
              round(abs(t),2), '; p =', round(1-pt(abs(t),df),3)))
}



```

## OR we can just use the R builtin

```{r corTest}

cor.test(allMurders$murders, allMurders$iceCream)



```

